{"version":3,"sources":["app.tsx","report-web-vitals.ts","index.tsx"],"names":["unityContext","UnityContext","loaderUrl","dataUrl","frameworkUrl","codeUrl","webglContextAttributes","preserveDrawingBuffer","App","useState","isUnityMounted","setIsUnityMounted","rotationSpeed","setRotationSpeed","cubeRotation","setCubeRotation","x","y","clickPosition","setClickPosition","saidMessage","setSaidMessage","handleOnUnityCanvas","canvas","context","getContext","contextAttributes","getContextAttributes","console","log","setAttribute","handleOnUnityLoaded","handleOnUnityRotationDidUpdate","degrees","Math","round","handleOnUnityClickedPosition","handleOnUnitySayMessage","message","useEffect","on","removeAllEventListeners","send","className","onClick","href","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","rootElement","document","getElementById","render"],"mappings":"kPAUMA,EAAe,IAAIC,eAAa,CACpCC,UAAW,oCACXC,QAAS,+BACTC,aAAc,uCACdC,QAAS,+BACTC,uBAAwB,CACtBC,uBAAuB,KAwHZC,MAnHf,WAEE,MAA4CC,oBAAkB,GAA9D,mBAAOC,EAAP,KAAuBC,EAAvB,KACA,EAA0CF,mBAAiB,IAA3D,mBAAOG,EAAP,KAAsBC,EAAtB,KACA,EAAwCJ,mBAAiB,GAAzD,mBAAOK,EAAP,KAAqBC,EAArB,KACA,EAA0CN,mBAAkB,CAAEO,EAAG,EAAGC,EAAG,IAAvE,mBAAOC,EAAP,KAAsBC,EAAtB,KACA,EAAsCV,mBAAiB,WAAvD,mBAAOW,EAAP,KAAoBC,EAApB,KAqBA,SAASC,EAAoBC,GAC3B,IAAMC,EAAUD,EAAOE,WAAW,SAC5BC,EAAiB,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAASG,uBACnCC,QAAQC,IAAIH,GACZH,EAAOO,aAAa,OAAQ,eAI9B,SAASC,IACPH,QAAQC,IAAI,gBAKd,SAASG,EAA+BC,GACtClB,EAAgBmB,KAAKC,MAAMF,IAK7B,SAASG,EAA6BpB,EAAWC,GAC/CE,EAAiB,CAAEH,IAAGC,MAKxB,SAASoB,EAAwBC,GAC/BjB,EAAeiB,GAoBjB,OAjEAC,qBAAU,WAOR,OANAvC,EAAawC,GAAG,SAAUlB,GAC1BtB,EAAawC,GAAG,SAAUT,GAC1B/B,EAAawC,GAAG,oBAAqBR,GACrChC,EAAawC,GAAG,kBAAmBJ,GACnCpC,EAAawC,GAAG,MAAOH,GAEhB,WACLrC,EAAayC,6BAEd,IAGHF,qBAAU,WACRvC,EAAa0C,KAAK,YAAa,mBAAoB9B,KAClD,CAACA,IAmDF,cAAC,WAAD,UACE,sBAAK+B,UAAU,UAAf,UAEE,yDACA,uPAOA,wBAAQC,QAjBd,WACEjC,GAAmBD,IAgBf,6BACA,wBAAQkC,QA7Bd,WACE/B,EAAiBD,EAAgB,KA4B7B,4BACA,wBAAQgC,QAzBd,WACE/B,EAAiBD,EAAgB,KAwB7B,6BAEoB,IAAnBF,GACC,eAAC,WAAD,WACE,qBAAKiC,UAAU,kBAAf,SAEE,cAAC,IAAD,CAAOA,UAAU,eAAe3C,aAAcA,MAGhD,qDACsB,4BAAIc,IAD1B,WAEE,uBAFF,sBAGqB,kCAAKM,EAAL,OAHrB,IAIE,uBAJF,cAKa,kCAAKF,EAAcF,KALhC,KAKwC,kCAAKE,EAAcD,WAI/D,mDACoB,IAClB,mBAAG4B,KAAK,oCAAR,sCC5GKC,EAlBS,SAAUC,GAC5BA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAMtB,IALFC,EAKC,EALDA,OACAC,EAIC,EAJDA,OACAC,EAGC,EAHDA,OACAC,EAEC,EAFDA,OACAC,EACC,EADDA,QAEAJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCVRQ,G,MAAcC,SAASC,eAAe,SAG5CC,iBACE,cAAC,aAAD,UACE,cAAC,EAAD,MAEFH,GAIFT,EAAgBlB,QAAQC,O","file":"static/js/main.562a9f91.chunk.js","sourcesContent":["import \"./app.css\";\nimport { Fragment, useEffect, useState } from \"react\";\nimport Unity, { UnityContext } from \"react-unity-webgl\";\n\ninterface Vector2 {\n  x: number;\n  y: number;\n}\n\n// This is the context that Unity will use to communicate with the React app.\nconst unityContext = new UnityContext({\n  loaderUrl: \"./unitybuild/myunityapp.loader.js\",\n  dataUrl: \"./unitybuild/myunityapp.data\",\n  frameworkUrl: \"./unitybuild/myunityapp.framework.js\",\n  codeUrl: \"./unitybuild/myunityapp.wasm\",\n  webglContextAttributes: {\n    preserveDrawingBuffer: true,\n  },\n});\n\n// This is the React component that will be rendering the Unity app.\nfunction App() {\n  // The app's state.\n  const [isUnityMounted, setIsUnityMounted] = useState<boolean>(true);\n  const [rotationSpeed, setRotationSpeed] = useState<number>(30);\n  const [cubeRotation, setCubeRotation] = useState<number>(0);\n  const [clickPosition, setClickPosition] = useState<Vector2>({ x: 0, y: 0 });\n  const [saidMessage, setSaidMessage] = useState<string>(\"Nothing\");\n\n  // When the component is mounted, we'll register some event listener.\n  useEffect(() => {\n    unityContext.on(\"canvas\", handleOnUnityCanvas);\n    unityContext.on(\"loaded\", handleOnUnityLoaded);\n    unityContext.on(\"RotationDidUpdate\", handleOnUnityRotationDidUpdate);\n    unityContext.on(\"ClickedPosition\", handleOnUnityClickedPosition);\n    unityContext.on(\"Say\", handleOnUnitySayMessage);\n    // When the component is unmounted, we'll unregister the event listener.\n    return function () {\n      unityContext.removeAllEventListeners();\n    };\n  }, []);\n\n  // When the rotation speed has been updated, it will be sent to Unity.\n  useEffect(() => {\n    unityContext.send(\"MeshCrate\", \"SetRotationSpeed\", rotationSpeed);\n  }, [rotationSpeed]);\n\n  // Built-in event invoked when the Unity canvas is ready to be interacted with.\n  function handleOnUnityCanvas(canvas: HTMLCanvasElement) {\n    const context = canvas.getContext(\"webgl\");\n    const contextAttributes = context?.getContextAttributes();\n    console.log(contextAttributes);\n    canvas.setAttribute(\"role\", \"unityCanvas\");\n  }\n\n  // Built-in event invoked when the Unity app is loaded.\n  function handleOnUnityLoaded() {\n    console.log(\"Unity loaded\");\n  }\n\n  // Custom event invoked when the Unity app sends a message indicating that the\n  // rotation has changed.\n  function handleOnUnityRotationDidUpdate(degrees: number) {\n    setCubeRotation(Math.round(degrees));\n  }\n\n  // Custom event invoked when the Unity app sends a message indicating that the\n  // mouse click position has changed.\n  function handleOnUnityClickedPosition(x: number, y: number) {\n    setClickPosition({ x, y });\n  }\n\n  // Custom event invoked when the Unity app sends a message including something\n  // it said.\n  function handleOnUnitySayMessage(message: string) {\n    setSaidMessage(message);\n  }\n\n  // Event invoked when the user clicks the button, the speed will be increased.\n  function handleOnClickIncreaseSpeed() {\n    setRotationSpeed(rotationSpeed + 15);\n  }\n\n  // Event invoked when the user clicks the button, the speed will be decreased.\n  function handleOnClickDecreaseSpeed() {\n    setRotationSpeed(rotationSpeed - 15);\n  }\n\n  // Event invoked when the user clicks the button, the unity container will be\n  // mounted or unmounted depending on the current mounting state.\n  function handleOnClickUnMountUnity() {\n    setIsUnityMounted(!isUnityMounted);\n  }\n\n  // This is the React component that will be rendering the Unity app.\n  return (\n    <Fragment>\n      <div className=\"wrapper\">\n        {/* Introduction text */}\n        <h1>React Unity WebGL Tests</h1>\n        <p>\n          In this React Application we'll explore the possibilities with the\n          React Unity WebGL Module. Use the built-in events, custom events,\n          mount, unmount, press the buttons and resize the view to see the magic\n          in action.\n        </p>\n        {/* Some buttons to interact */}\n        <button onClick={handleOnClickUnMountUnity}>(Un)mount Unity</button>\n        <button onClick={handleOnClickIncreaseSpeed}>Increase speed</button>\n        <button onClick={handleOnClickDecreaseSpeed}>Decrease speed</button>\n        {/* The Unity app */}\n        {isUnityMounted === true && (\n          <Fragment>\n            <div className=\"unity-container\">\n              {/* TODO add demo loading screen */}\n              <Unity className=\"unity-canvas\" unityContext={unityContext} />\n            </div>\n            {/* Displaying some output values */}\n            <p>\n              The cube is rotated <b>{cubeRotation}</b> degrees\n              <br />\n              The Unity app said <b>\"{saidMessage}\"</b>!\n              <br />\n              Clicked at <b>x{clickPosition.x}</b>, <b>y{clickPosition.y}</b>\n            </p>\n          </Fragment>\n        )}\n        <h6>\n          Made with love by{\" \"}\n          <a href=\"https://github.com/jeffreylanters\">Jeffrey Lanters</a>\n        </h6>\n      </div>\n    </Fragment>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\n// report web vitals\nconst reportWebVitals = function (onPerfEntry?: ReportHandler) {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(function ({\n      getCLS,\n      getFID,\n      getFCP,\n      getLCP,\n      getTTFB,\n    }) {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { StrictMode } from \"react\";\nimport { render } from \"react-dom\";\nimport App from \"./app\";\nimport reportWebVitals from \"./report-web-vitals\";\nimport \"./index.css\";\n\nconst rootElement = document.getElementById(\"root\");\n\n// renders the app onto the document\nrender(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n\n// enable measuring performance of the app onto the console\nreportWebVitals(console.log);\n"],"sourceRoot":""}